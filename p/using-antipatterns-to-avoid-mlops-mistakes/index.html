<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content=" 업데이트 내역: 2021.07.16 Brier Score 수식 추가 TL;DR MLOps를 성공적으로 수행하기 위해서는 아래와 같은 상황들이 일어나지 않도록 해야 합니다.\n데이터 유출에 의해 과도하게 최적화(overly optimistic)된 모델이 배포된 상황 모델이 배포된 후 아무런 관리없이 계속해서 사용 되는 상황 Hyper-parameter Optimization이 이루어지지 않는 상황 실제로 성능이 검증되지 않는 기법이 파이프라인에 바로 적용되는 상황 모델 성능 향상의 요인을 정확히 파악할 수 없는 상황 Test 데이터가 독립적이지 못한 상황 Concept drift에 대응할 수 없는 상황 잘 보정되지 않은 모델을 배포함으로서 머신러닝 파이프라인 전체의 신뢰도 하락이 일어나는 상황 모델을 개발하는 과정에서 데이터가 수정되는 과정이 기록되지 않는 상황 해당 포스트는 Using AntiPatterns to avoid MLOps Mistakes를 읽고 요약한 내용입니다.\n원문이 더 자연스럽게 이해되는 경우에는 따로 번역하지 않고 원문 그대로를 담았습니다.\n"><title>Using AntiPatterns to avoid MLOps Mistakes</title>
<link rel=canonical href=https://aiden-jeon.github.io/blog/p/using-antipatterns-to-avoid-mlops-mistakes/><link rel=stylesheet href=/blog/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Using AntiPatterns to avoid MLOps Mistakes"><meta property='og:description' content=" 업데이트 내역: 2021.07.16 Brier Score 수식 추가 TL;DR MLOps를 성공적으로 수행하기 위해서는 아래와 같은 상황들이 일어나지 않도록 해야 합니다.\n데이터 유출에 의해 과도하게 최적화(overly optimistic)된 모델이 배포된 상황 모델이 배포된 후 아무런 관리없이 계속해서 사용 되는 상황 Hyper-parameter Optimization이 이루어지지 않는 상황 실제로 성능이 검증되지 않는 기법이 파이프라인에 바로 적용되는 상황 모델 성능 향상의 요인을 정확히 파악할 수 없는 상황 Test 데이터가 독립적이지 못한 상황 Concept drift에 대응할 수 없는 상황 잘 보정되지 않은 모델을 배포함으로서 머신러닝 파이프라인 전체의 신뢰도 하락이 일어나는 상황 모델을 개발하는 과정에서 데이터가 수정되는 과정이 기록되지 않는 상황 해당 포스트는 Using AntiPatterns to avoid MLOps Mistakes를 읽고 요약한 내용입니다.\n원문이 더 자연스럽게 이해되는 경우에는 따로 번역하지 않고 원문 그대로를 담았습니다.\n"><meta property='og:url' content='https://aiden-jeon.github.io/blog/p/using-antipatterns-to-avoid-mlops-mistakes/'><meta property='og:site_name' content="Aiden's Camp"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='paper-review'><meta property='article:published_time' content='2021-07-06T00:00:00+00:00'><meta property='article:modified_time' content='2021-07-06T00:00:00+00:00'><meta name=twitter:title content="Using AntiPatterns to avoid MLOps Mistakes"><meta name=twitter:description content=" 업데이트 내역: 2021.07.16 Brier Score 수식 추가 TL;DR MLOps를 성공적으로 수행하기 위해서는 아래와 같은 상황들이 일어나지 않도록 해야 합니다.\n데이터 유출에 의해 과도하게 최적화(overly optimistic)된 모델이 배포된 상황 모델이 배포된 후 아무런 관리없이 계속해서 사용 되는 상황 Hyper-parameter Optimization이 이루어지지 않는 상황 실제로 성능이 검증되지 않는 기법이 파이프라인에 바로 적용되는 상황 모델 성능 향상의 요인을 정확히 파악할 수 없는 상황 Test 데이터가 독립적이지 못한 상황 Concept drift에 대응할 수 없는 상황 잘 보정되지 않은 모델을 배포함으로서 머신러닝 파이프라인 전체의 신뢰도 하락이 일어나는 상황 모델을 개발하는 과정에서 데이터가 수정되는 과정이 기록되지 않는 상황 해당 포스트는 Using AntiPatterns to avoid MLOps Mistakes를 읽고 요약한 내용입니다.\n원문이 더 자연스럽게 이해되는 경우에는 따로 번역하지 않고 원문 그대로를 담았습니다.\n"><link rel="shortcut icon" href=/blog/icons/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-419F58RW9W"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-419F58RW9W")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/blog/><img src=/blog/imgs/avatar_hu6933059792947527008.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🔥</span></figure><div class=site-meta><h1 class=site-name><a href=/blog>Aiden's Camp</a></h1><h2 class=site-description>Welcome to Aiden's Camp</h2></div></header><ol class=menu-social><li><a href=https://github.com/Aiden-Jeon target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/jongseob-jeon/ target=_blank title=Linkedin rel=me><svg fill="#000" height="800" width="800" id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 310 310"><g id="XMLID_801_"><path id="XMLID_802_" d="M72.16 99.73H9.927c-2.762.0-5 2.239-5 5v199.928c0 2.762 2.238 5 5 5H72.16c2.762.0 5-2.238 5-5V104.73c0-2.76100000000001-2.238-5-5-5z"/><path id="XMLID_803_" d="M41.066.341C18.422.341.0 18.743.0 41.362.0 63.991 18.422 82.4 41.066 82.4c22.626.0 41.033-18.41 41.033-41.038C82.1 18.743 63.692.341 41.066.341z"/><path id="XMLID_804_" d="M230.454 94.761c-24.995.0-43.472 10.745-54.679 22.954V104.73c0-2.761-2.238-5-5-5h-59.599c-2.762.0-5 2.239-5 5v199.928c0 2.762 2.238 5 5 5h62.097c2.762.0 5-2.238 5-5V205.74c0-33.333 9.054-46.319 32.29-46.319 25.306.0 27.317 20.818 27.317 48.034v97.204c0 2.762 2.238 5 5 5H305c2.762.0 5-2.238 5-5V194.995C310 145.43 300.549 94.761 230.454 94.761z"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/blog/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/blog/categories><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>Categories</span></a></li><li><a href=/blog/tags><svg class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>Tags</span></a></li><li><a href=/blog/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/blog/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/blog/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#tldr>TL;DR</a></li><li><a href=#antipatterns>AntiPatterns</a><ul><li><a href=#anti-pattern-이란>Anti Pattern 이란?</a></li><li><a href=#mlops를-개발-및-배포할-때-발생할-수-있는-문제들>MLOps를 개발 및 배포할 때 발생할 수 있는 문제들</a></li></ul></li><li><a href=#types-of-antipatterns>Types of AntiPatterns</a><ul><li><a href=#1-data-leakage-antipattern>1. Data Leakage AntiPattern</a></li><li><a href=#2-act-now-reflect-never-antipattern>2. &lsquo;Act Now, Reflect Never&rsquo; AntiPattern</a></li><li><a href=#3-tuning-under-the-carpet-antipattern>3. Tuning-under-the-Carpet AntiPattern</a></li><li><a href=#4-pest-antipattern>4. &lsquo;PEST&rsquo; AntiPattern</a></li><li><a href=#5-bad-credit-assignment-antipattern>5. Bad Credit Assignment AntiPattern</a></li><li><a href=#6-grade-your-own-exam-antipattern>6. Grade-your-own-Exam AntiPattern</a></li><li><a href=#7-setforget-antipattern>7. Set&amp;Forget AntiPattern</a></li><li><a href=#8communicate-with-ambivalence-antipattern>8.&lsquo;Communicate with Ambivalence&rsquo; AntiPattern</a></li><li><a href=#9data-crisis-as-a-service-antipattern>9.&lsquo;Data Crisis as a Service&rsquo; AntiPattern</a></li></ul></li></ul></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/blog/categories/mlops/>Mlops</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/blog/p/using-antipatterns-to-avoid-mlops-mistakes/>Using AntiPatterns to avoid MLOps Mistakes</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jul 06, 2021</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><ul><li>업데이트 내역:<ul><li>2021.07.16 Brier Score 수식 추가</li></ul></li></ul><hr><h2 id=tldr><a href=#tldr class=header-anchor></a>TL;DR</h2><p>MLOps를 성공적으로 수행하기 위해서는 아래와 같은 상황들이 일어나지 않도록 해야 합니다.</p><ol><li>데이터 유출에 의해 과도하게 최적화(overly optimistic)된 모델이 배포된 상황</li><li>모델이 배포된 후 아무런 관리없이 계속해서 사용 되는 상황</li><li>Hyper-parameter Optimization이 이루어지지 않는 상황</li><li>실제로 성능이 검증되지 않는 기법이 파이프라인에 바로 적용되는 상황</li><li>모델 성능 향상의 요인을 정확히 파악할 수 없는 상황</li><li>Test 데이터가 독립적이지 못한 상황</li><li>Concept drift에 대응할 수 없는 상황</li><li>잘 보정되지 않은 모델을 배포함으로서 머신러닝 파이프라인 전체의 신뢰도 하락이 일어나는 상황</li><li>모델을 개발하는 과정에서 데이터가 수정되는 과정이 기록되지 않는 상황</li></ol><hr><p>해당 포스트는 <a class=link href="https://arxiv.org/abs/2107.00079?fbclid=IwAR1FhYygW0eN1JgJhu-ghFjU222xrx8gDR2NpRIR4Ii7_v9eKunxh2nKzG4" target=_blank rel=noopener>Using AntiPatterns to avoid MLOps Mistakes</a>를 읽고 요약한 내용입니다.<br>원문이 더 자연스럽게 이해되는 경우에는 따로 번역하지 않고 원문 그대로를 담았습니다.</p><h2 id=antipatterns><a href=#antipatterns class=header-anchor></a>AntiPatterns</h2><h3 id=anti-pattern-이란><a href=#anti-pattern-%ec%9d%b4%eb%9e%80 class=header-anchor></a>Anti Pattern 이란?</h3><blockquote><p>AntiPatterns provide real-world experience in recognizing recurring problems in the software industry and provide a detailed remedy for the most common predicaments. AntiPatterns highlight the most common problems that face the software industry and provide the tools to enable you to recognize these problems and to determine their underlying causes.<br>출처: <a class=link href=https://sourcemaking.com/antipatterns target=_blank rel=noopener>https://sourcemaking.com/antipatterns</a></p></blockquote><h3 id=mlops를-개발-및-배포할-때-발생할-수-있는-문제들><a href=#mlops%eb%a5%bc-%ea%b0%9c%eb%b0%9c-%eb%b0%8f-%eb%b0%b0%ed%8f%ac%ed%95%a0-%eb%95%8c-%eb%b0%9c%ec%83%9d%ed%95%a0-%ec%88%98-%ec%9e%88%eb%8a%94-%eb%ac%b8%ec%a0%9c%eb%93%a4 class=header-anchor></a>MLOps를 개발 및 배포할 때 발생할 수 있는 문제들</h3><ol><li>Does the data processing pipeline have unintended side effects on modeling due to data leakage or HARKing?</li><li>What happens when models ‘misbehave’ in production? How is this misbehavior measured? Are there compensatory or remedial pipelines?</li><li>How often are models re-trained and what is the process necessary to tune models? Is the training and model tuning reproducible?</li><li>How is model performance assessed and tracked to ensure compliance with performance requirements?</li><li>What constitutes a material change in the MLOps pipeline? How are changes handled?</li><li>Where does the input data reside and how is it prepared on a regular basis for input to an ML model?</li></ol><h2 id=types-of-antipatterns><a href=#types-of-antipatterns class=header-anchor></a>Types of AntiPatterns</h2><p><img src=/imgs/mlops/mlops_type_of_antipattern.png loading=lazy alt=type_of_antipatterns></p><p>Production 단계에서는 모델들은 다음과 같은 패턴으로 계속해서 바뀌게 됩니다.</p><ol><li>replaced by a newer (e.g., more accurate) model</li><li>retrained with more recent data
2.1) with keeping existing hyper-parameters or ranges constant or fixed
2.2) with new search for hyper-parameters</li></ol><p>모델이 바뀌는 과정에서 여러가지 AntiPattern들을 마주하게 되는데 논문에서는 다음과 같은 9개의 상황을 제시합니다.</p><ol><li>Data Leakage AntiPattern</li><li>&lsquo;Act Now, Reflect Never&rsquo; AntiPattern</li><li>Tuning-under-the-Carpet AntiPattern</li><li>&lsquo;PEST&rsquo; AntiPattern</li><li>Bad Credit Assignment AntiPattern</li><li>Grade-your-own-Exam AntiPattern</li><li>Set&amp;Forget AntiPattern</li><li>&lsquo;Communicate with Ambivalence&rsquo; AntiPattern</li><li>&lsquo;Data Crisis as a Service&rsquo; AntiPattern</li></ol><h3 id=1-data-leakage-antipattern><a href=#1-data-leakage-antipattern class=header-anchor></a>1. Data Leakage AntiPattern</h3><p>데이터 유출에 의해 과도하게 최적화(overly optimistic)된 모델이 배포된 상황입니다.</p><p>Data leakage란 직역하면 데이터 유출이라는 뜻입니다. Data leakage가 된 데이터로 모델을 학습한다면 모델이 과도하게 최적화가 됩니다. 과도하게 최적화된 모델을 배포할 경우 모델 성능의 하락으로 인한 문제가 발생할 수 있습니다. 일반적으로 데이터는 Row와 Column으로 이루어져 있는데 양 방향에서 데이터 유출이 생길 수 있습니다</p><ol><li>Feature Leakage (Column-wise leakage)<ul><li>caused by a duplicate label, a proxy for the label, or the label itself</li><li>For example, including a &ldquo;MonthlySalary&rdquo; column when predicting &ldquo;YearlySalary&rdquo;</li></ul></li><li>Training Example Leakage (Row-wise leakage)<ul><li>caused by improper sharing of information between rows of data.</li><li>For example, suppose a model is developed to predict an individual&rsquo;s risk for being diagnosed with a particular disease within the next year.</li></ul></li></ol><p>출처: <a class=link href=https://en.wikipedia.org/wiki/Leakage_%28machine_learning%29 target=_blank rel=noopener>https://en.wikipedia.org/wiki/Leakage_(machine_learning)</a></p><p>논문에서는 이러한 데이터 유출의 상황 4가지를 제시합니다.</p><ol><li>Peek-a-Boo AntiPattern<br>시계열 데이터의 경우 실제 발생 시간과 측정 시간의 차이(lag)가 있을 수 있습니다. 그런데 이러한 시계열 데이터를 여러 소스에서 받고 이를 한 데이터셋으로 만든 후 모델을 학습한다면 각 데이터의 lag들이 문제가 될 수 있습니다.</li><li>Temporal Leakage AntiPattern<br>예측 문제에서 데이터를 train, test 을 sequential하게 나누지 않을 경우 독립이어야 하는 두 데이터가 높은 상관관계를 가질 수 있습니다.</li><li>Oversampling Leakage AntiPattern<br><img src=/imgs/mlops/mlops_oversampling.png loading=lazy alt=oversampeling>
Oversampling을 상황에서도 데이터 유출이 일어날 수 있습니다. SMOTE와 같은 oversampling 기법은 tarin, test 가 이미 구분된 뒤에 실행되어야 합니다. 그런데 이러한 구분 전에 oversampling을 실행한다면 정보 유출의 가능성이 생깁니다.</li><li>Metrics-from-Beyond AntiPattern<br>이 패턴은 pre-processing leakage, hyper-parameter leakage 에서 볼 수 있습니다. 예를 들어서 전처리를 진행할 때 train 과 test를 묶어서 진행하는 경우입니다.</li></ol><h3 id=2-act-now-reflect-never-antipattern><a href=#2-act-now-reflect-never-antipattern class=header-anchor></a>2. &lsquo;Act Now, Reflect Never&rsquo; AntiPattern</h3><p>모델이 배포된 후 아무런 관리없이 계속해서 사용 되는 상황입니다. 이러한 상황에서는 다음과 같은 문제들에 대처할 수 없게 됩니다.</p><ol><li>Concept drift</li><li>Irrelevant or easily recognisable erroneous predictions</li><li>Adversarial attacks</li></ol><p>이러한 문제들에 대처하기 위해서는 배포된 모델에 대한 monitoring, track, debug가 가능해야 합니다. 논문에서는 이를 위해 Meta-model을 제안합니다. Meta-model 이란 배포된 모델의 모든 예측값을 평가하고 신뢰할 수 있는지 판단하는 모델을 뜻 합니다. 논문에서는 Meta-model을 사용하는 2가지 방법을 제시합니다.</p><ol><li>Performing duplicate detection, filling in missing values, and is also used to fine-tune precision / recall by suppressing alerts deemed to be of low quality.</li><li>Inspect model decisions further by employing explanation frameworks like LIME.
<img src=/imgs/mlops/mlops_lime.png loading=lazy alt=lime></li></ol><h3 id=3-tuning-under-the-carpet-antipattern><a href=#3-tuning-under-the-carpet-antipattern class=header-anchor></a>3. Tuning-under-the-Carpet AntiPattern</h3><p><img src=/imgs/mlops/mlops_hpo.png loading=lazy alt=hpo></p><p>머신러닝과 딥러닝을 학습할 때 가장 중요한 부분은 바로 hyper-parameter 입니다. Baseline 모델과 hyper-parameter tuning이 된 모델의 성능 차이는 크다고 여러 연구에서 증명되었습니다. 배포하는 모델의 성능을 높이려면 이러한 hyper-parameter tuning을 쉽게 이용할 수 있어야 합니다. 또한 재현이 가능해야 합니다.</p><h3 id=4-pest-antipattern><a href=#4-pest-antipattern class=header-anchor></a>4. &lsquo;PEST&rsquo; AntiPattern</h3><p>실제로 성능이 검증되지 않는 기법이 파이프라인에 바로 적용되는 상황입니다.</p><p>지금도 많은 학회에서 모델의 성능을 높이기 위한 여러 기법들이 발표되고 있습니다. 그런데 연구 환경과 실제 환경의 차이로 인해서 새로운 기법이 현재 배포되고 있는 모델에서는 같은 효과를 보이지 않는 경우도 많습니다. 그래서 실제 데이터에 검증되지 않은 새로운 기법을 바로 적용할 수 없습니다.</p><p>이러한 새로운 기법을 실험을 실제 모델과 동일한 파이프라인에서 진행할 수 있어야 합니다.</p><h3 id=5-bad-credit-assignment-antipattern><a href=#5-bad-credit-assignment-antipattern class=header-anchor></a>5. Bad Credit Assignment AntiPattern</h3><p>모델 성능 향상의 요인을 정확히 파악할 수 없는 상황입니다.</p><p>머신러닝 파이프라인에서 모델의 성능이 향상되는 부분은 각 과정마다 일어날 수 있습니다. 논문에서는 다음과 같은 과정들을 제시합니다.</p><ol><li>A function of clever problem formulations</li><li>Data preprocessing</li><li>Hyperparameter tuning</li><li>application of existing well-established methods to interesting new tasks as detailed by <a class=link href=https://arxiv.org/abs/1807.03341 target=_blank rel=noopener>paper</a>.</li></ol><p>정확한 성능 향상의 요인을 알기 위해서는 수정이 되는 부분을 제외하고 다른 부분은 계속해서 동일한 환경에서 실험이 이루어져야 합니다.</p><h3 id=6-grade-your-own-exam-antipattern><a href=#6-grade-your-own-exam-antipattern class=header-anchor></a>6. Grade-your-own-Exam AntiPattern</h3><p>Test 데이터가 독립적이지 못한 상황입니다. 일반적으로 머신러닝 실험을 할 경우 평가와 test 데이터가 독립적으로 샘플링되어야 합니다. 또한 test 데이터는 최종적인 모델 평가 전에는 사용되어서는 안됩니다. 만약 test 데이터가 모델을 평가할 때 계속 사용된다면 HARKing (Hypothesizing After Results are Known)에 빠지게 됩니다. HARKing이란 모델을 만드는 사람이 성능을 test 데이터에 대해서 확인하고 모델의 성능을 올리는 과정을 뜻합니다. 이 과정은 잠재적인 data leakage를 야기하게 됩니다.</p><p>이를 위해서 모델링을 담당하는 팀은 독립적인 &lsquo;‘Ground Truth system&rsquo;을 구성해서 API를 통해 예측 데이터를 얻어와 예측을 할 수 있어야 합니다.</p><h3 id=7-setforget-antipattern><a href=#7-setforget-antipattern class=header-anchor></a>7. Set&amp;Forget AntiPattern</h3><p>Concept drift에 대응할 수 없는 상황입니다. 일반적으로 머신러닝 파이프라인을 만들 때 데이터 샘플링이 i.i.d 한 상황에서 이루어진다고 가정합니다. 그래서 한번 모델 학습과 예측을 설정하고 나면 잊어 버리는 경우(Set & Forget)가 많습니다. 그런데 실제 상황에서는 예측해야 하는 값의 통계적 특성이 변화하는 경우(Concept Drift)가 발생합니다.</p><blockquote><p>In predictive analytics and machine learning, concept drift means that the statistical properties of the target variable, which the model is trying to predict, change over time in unforeseen ways. This causes problems because the predictions become less accurate as time passes.<br>출처: <a class=link href=https://en.wikipedia.org/wiki/Concept_drift target=_blank rel=noopener>https://en.wikipedia.org/wiki/Concept_drift</a></p></blockquote><p>이러한 concept drift에 대처하기 위해서는 의사결정을 도와주는 보조 시스템(Decision support system)이 필요합니다. Concept drift를 대처하기 위해 의사결정나무와 같은 해석이 가능한 tree-based 를 이용할 수 있습니다.</p><p>자세한 방법은 논문에서 인용한 논문을 참고하시기 바랍니다.</p><h3 id=8communicate-with-ambivalence-antipattern><a href=#8communicate-with-ambivalence-antipattern class=header-anchor></a>8.&lsquo;Communicate with Ambivalence&rsquo; AntiPattern</h3><p>잘 보정되지 않은 모델을 배포함으로서 머신러닝 파이프라인 전체의 신뢰도 하락이 일어나는 상황입니다. 잘 보정된 모델은 <em>Brier score</em>가 잘 보정 되었다는 뜻입니다.</p><p>만약 보정되지 않는 모델을 사용한다면 파이프라인의 어디가 문제인지 정확히 진단할 수 없게 됩니다. 그래서 최근 연구에서는 모델의 설명 가능성 뿐만 아니라 모델의 불확실성을 전달하는 것도 중요하다고 합니다.</p><ul><li>Brier Score란?</li></ul><blockquote><p>The Brier Score is a strictly proper score function or strictly proper scoring rule that measures the accuracy of probabilistic predictions. For uni dimensional predictions, it is strictly equivalent to the mean squared error as applied to predicted probabilities.<br>출처: <a class=link href=https://en.wikipedia.org/wiki/Brier_score target=_blank rel=noopener>https://en.wikipedia.org/wiki/Brier_score</a></p></blockquote><p>Brier Score 수식은 다음과 같습니다.</p><p>$$BS=\frac{1}{N}\sum_{t=1}^N (f_{t}-o_{t})^2$$</p><ul><li>$N$: the number of items you’re calculating a Brier score for</li><li>$f_{t}$: is the forecast probability (i.e. 25% chance)</li><li>$o_{t}$: is the outcome (1 if it happened, 0 if it didn’t)</li></ul><p>출처: <a class=link href=https://www.statisticshowto.com/brier-score/ target=_blank rel=noopener>https://www.statisticshowto.com/brier-score/</a></p><p>Brier Score가 0에 가까울 수록 모델이 잘 보정되었다고 해석할 수 있습니다.</p><h3 id=9data-crisis-as-a-service-antipattern><a href=#9data-crisis-as-a-service-antipattern class=header-anchor></a>9.&lsquo;Data Crisis as a Service&rsquo; AntiPattern</h3><p>모델을 개발하는 과정에서 데이터가 수정되는 과정이 기록되지 않는 상황입니다. 이 과정이 반복된다면 모델 학습에 사용한 데이터가 어떤 과정을 거쳤는지 확인할 수 없게 됩니다.</p></section><footer class=article-footer><section class=article-tags><a href=/blog/tags/paper-review/>Paper-Review</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/blog/p/apache-kafka-101/><div class=article-details><h2 class=article-title>Apache Kafka 101</h2></div></a></article><article><a href=/blog/p/chapter-9.-continual-learning-and-test-in-production/><div class=article-details><h2 class=article-title>Chapter 9. Continual Learning and Test in Production</h2></div></a></article><article><a href=/blog/p/chapter-8.-data-distribution-shifts-and-monitoring/><div class=article-details><h2 class=article-title>Chapter 8. Data Distribution Shifts and Monitoring</h2></div></a></article><article><a href=/blog/p/chapter-7.-model-deployment-and-prediction-service/><div class=article-details><h2 class=article-title>Chapter 7. Model Deployment and Prediction Service</h2></div></a></article><article><a href=/blog/p/chapter-3.-data-engineer-fundamentals/><div class=article-details><h2 class=article-title>Chapter 3. Data Engineer Fundamentals</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=aiden-jeon/aiden-jeon.github.io issue-term=pathname label=comment crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 Aiden's Camp</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.27.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>