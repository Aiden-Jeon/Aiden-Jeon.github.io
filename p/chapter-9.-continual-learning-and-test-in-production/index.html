<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Summary of Designing Machine Learning Systems written by Chip Huyen.\nChapter 9. Continual Learning and Test in Production continual learning to adapt our models to data distribution shifts infrastructural problem test in production model is retrained to adapt to the changing environment evaluating it on a stationary set also test in production monitoring & test in production monitoring: passively keeping track of the outputs test in production: proactively choosing which model to produce outputs Goal: to understand a model’s performance and figure out when to update it Goal of continual learning to safely and efficiently automate the update Continual Learning Misunderstand in term of “Continual learning” A models updates itself with every incoming sample in production problems catastrophic forgetting tendency of a neural network to completely and abruptly forget previous learned information upon learning new information make training more expensive Update their model in micro-batch (512, 1024) updated model shouldn’t be deployed until it’s been evaluated existing model → champion model replica model → challenger model Don’t need to update model frequently don’t have enough traffic model don’t decay that fast 1. Stateless Retraining Versus Stateful Training continual learning isn’t about retraining frequency → manner in which model is retrained 1. Stateless retraining the model is trained from scratch\n"><title>Chapter 9. Continual Learning and Test in Production</title>
<link rel=canonical href=https://aiden-jeon.github.io/blog/p/chapter-9.-continual-learning-and-test-in-production/><link rel=stylesheet href=/blog/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Chapter 9. Continual Learning and Test in Production"><meta property='og:description' content="Summary of Designing Machine Learning Systems written by Chip Huyen.\nChapter 9. Continual Learning and Test in Production continual learning to adapt our models to data distribution shifts infrastructural problem test in production model is retrained to adapt to the changing environment evaluating it on a stationary set also test in production monitoring & test in production monitoring: passively keeping track of the outputs test in production: proactively choosing which model to produce outputs Goal: to understand a model’s performance and figure out when to update it Goal of continual learning to safely and efficiently automate the update Continual Learning Misunderstand in term of “Continual learning” A models updates itself with every incoming sample in production problems catastrophic forgetting tendency of a neural network to completely and abruptly forget previous learned information upon learning new information make training more expensive Update their model in micro-batch (512, 1024) updated model shouldn’t be deployed until it’s been evaluated existing model → champion model replica model → challenger model Don’t need to update model frequently don’t have enough traffic model don’t decay that fast 1. Stateless Retraining Versus Stateful Training continual learning isn’t about retraining frequency → manner in which model is retrained 1. Stateless retraining the model is trained from scratch\n"><meta property='og:url' content='https://aiden-jeon.github.io/blog/p/chapter-9.-continual-learning-and-test-in-production/'><meta property='og:site_name' content="Aiden's Camp"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='ml-system'><meta property='article:published_time' content='2022-11-13T00:00:00+00:00'><meta property='article:modified_time' content='2022-11-13T00:00:00+00:00'><meta name=twitter:title content="Chapter 9. Continual Learning and Test in Production"><meta name=twitter:description content="Summary of Designing Machine Learning Systems written by Chip Huyen.\nChapter 9. Continual Learning and Test in Production continual learning to adapt our models to data distribution shifts infrastructural problem test in production model is retrained to adapt to the changing environment evaluating it on a stationary set also test in production monitoring & test in production monitoring: passively keeping track of the outputs test in production: proactively choosing which model to produce outputs Goal: to understand a model’s performance and figure out when to update it Goal of continual learning to safely and efficiently automate the update Continual Learning Misunderstand in term of “Continual learning” A models updates itself with every incoming sample in production problems catastrophic forgetting tendency of a neural network to completely and abruptly forget previous learned information upon learning new information make training more expensive Update their model in micro-batch (512, 1024) updated model shouldn’t be deployed until it’s been evaluated existing model → champion model replica model → challenger model Don’t need to update model frequently don’t have enough traffic model don’t decay that fast 1. Stateless Retraining Versus Stateful Training continual learning isn’t about retraining frequency → manner in which model is retrained 1. Stateless retraining the model is trained from scratch\n"><link rel="shortcut icon" href=/blog/icons/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-419F58RW9W"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-419F58RW9W")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/blog/><img src=/blog/imgs/avatar_hu6933059792947527008.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🔥</span></figure><div class=site-meta><h1 class=site-name><a href=/blog>Aiden's Camp</a></h1><h2 class=site-description>Welcome to Aiden's Camp</h2></div></header><ol class=menu-social><li><a href=https://github.com/Aiden-Jeon target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/jongseob-jeon/ target=_blank title=Linkedin rel=me><svg fill="#000" height="800" width="800" id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 310 310"><g id="XMLID_801_"><path id="XMLID_802_" d="M72.16 99.73H9.927c-2.762.0-5 2.239-5 5v199.928c0 2.762 2.238 5 5 5H72.16c2.762.0 5-2.238 5-5V104.73c0-2.76100000000001-2.238-5-5-5z"/><path id="XMLID_803_" d="M41.066.341C18.422.341.0 18.743.0 41.362.0 63.991 18.422 82.4 41.066 82.4c22.626.0 41.033-18.41 41.033-41.038C82.1 18.743 63.692.341 41.066.341z"/><path id="XMLID_804_" d="M230.454 94.761c-24.995.0-43.472 10.745-54.679 22.954V104.73c0-2.761-2.238-5-5-5h-59.599c-2.762.0-5 2.239-5 5v199.928c0 2.762 2.238 5 5 5h62.097c2.762.0 5-2.238 5-5V205.74c0-33.333 9.054-46.319 32.29-46.319 25.306.0 27.317 20.818 27.317 48.034v97.204c0 2.762 2.238 5 5 5H305c2.762.0 5-2.238 5-5V194.995C310 145.43 300.549 94.761 230.454 94.761z"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/blog/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/blog/categories><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>Categories</span></a></li><li><a href=/blog/tags><svg class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>Tags</span></a></li><li><a href=/blog/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/blog/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/blog/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#continual-learning>Continual Learning</a><ul><li><a href=#1-stateless-retraining-versus-stateful-training>1. Stateless Retraining Versus Stateful Training</a><ul><li><a href=#1-stateless-retraining>1. Stateless retraining</a></li><li><a href=#2-stateful-training>2. Stateful training</a></li><li><a href=#3-types-of-model-updates>3. Types of model updates</a></li></ul></li><li><a href=#2-why-continual-learning>2. Why Continual Learning</a></li><li><a href=#3-continual-learning-challenges>3. Continual Learning Challenges</a><ul><li><a href=#1-fresh-data-access-challenge>1. Fresh data access challenge</a></li><li><a href=#2-evaluation-challenged>2. Evaluation challenged</a></li><li><a href=#3-algorithm-challenged>3. Algorithm challenged</a></li></ul></li><li><a href=#4-four-stages-of-continual-learning>4. Four Stages of continual learning</a></li><li><a href=#5-how-often-to-update-your-model>5. How Often to Update Your Model</a><ul><li><a href=#1-value-of-data-freshness>1. Value of data freshness</a></li><li><a href=#2-model-iteration-versus-data-iteration>2. Model iteration versus data iteration</a></li></ul></li></ul></li><li><a href=#test-in-production>Test in Production</a><ul><li><a href=#1-shadow-deployment>1. Shadow Deployment</a></li><li><a href=#2-ab-testing>2. A/B Testing</a></li><li><a href=#3-canary-release>3. Canary Release</a></li><li><a href=#4-interleaving-experiments>4. Interleaving Experiments</a></li><li><a href=#5-bandits>5. Bandits</a></li></ul></li></ul></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/blog/categories/mlops/>Mlops</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/blog/p/chapter-9.-continual-learning-and-test-in-production/>Chapter 9. Continual Learning and Test in Production</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Nov 13, 2022</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><p>Summary of <a class=link href=https://learning.oreilly.com/library/view/designing-machine-learning/9781098107956/ target=_blank rel=noopener>Designing Machine Learning Systems</a> written by Chip Huyen.</p><hr><h1 id=chapter-9-continual-learning-and-test-in-production><a href=#chapter-9-continual-learning-and-test-in-production class=header-anchor></a>Chapter 9. Continual Learning and Test in Production</h1><ul><li>continual learning<ul><li>to adapt our models to data distribution shifts</li><li>infrastructural problem</li></ul></li><li>test in production<ul><li>model is retrained to adapt to the changing environment<ul><li>evaluating it on a stationary set</li><li>also test in production</li></ul></li><li>monitoring & test in production<ul><li>monitoring: passively keeping track of the outputs</li><li>test in production: proactively choosing which model to produce outputs</li><li>Goal: to understand a model’s performance and figure out when to update it</li></ul></li></ul></li><li>Goal of continual learning<ul><li>to safely and efficiently automate the update</li></ul></li></ul><h2 id=continual-learning><a href=#continual-learning class=header-anchor></a>Continual Learning</h2><ul><li>Misunderstand in term of “Continual learning”<ul><li>A models updates itself with every incoming sample in production<ul><li>problems<ol><li>catastrophic forgetting<ul><li>tendency of a neural network to completely and abruptly forget previous learned information upon learning new information</li></ul></li><li>make training more expensive</li></ol></li></ul></li><li>Update their model in micro-batch (512, 1024)</li></ul></li><li>updated model shouldn’t be deployed until it’s been evaluated<ul><li>existing model → champion model</li><li>replica model → challenger model</li></ul></li><li>Don’t need to update model frequently<ol><li>don’t have enough traffic</li><li>model don’t decay that fast</li></ol></li></ul><h3 id=1-stateless-retraining-versus-stateful-training><a href=#1-stateless-retraining-versus-stateful-training class=header-anchor></a>1. Stateless Retraining Versus Stateful Training</h3><ul><li>continual learning isn’t about retraining frequency → manner in which model is retrained</li></ul><h4 id=1-stateless-retraining><a href=#1-stateless-retraining class=header-anchor></a>1. Stateless retraining</h4><ul><li><p>the model is trained from scratch</p></li><li><p>for example</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;--&gt; (model v1)
</span></span><span class=line><span class=cl>  &lt;--&gt; (model v2)
</span></span><span class=line><span class=cl>    &lt;--&gt; (model v3)
</span></span></code></pre></td></tr></table></div></div></li><li><p>require a lot more data</p></li></ul><h4 id=2-stateful-training><a href=#2-stateful-training class=header-anchor></a>2. Stateful training</h4><ul><li><p>the model continues training on new data</p></li><li><p>fine-tuning or incremental learning</p></li><li><p>for example</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;--&gt; (model v1)
</span></span><span class=line><span class=cl>    &lt;-&gt; (model v1.1)
</span></span><span class=line><span class=cl>       &lt;-&gt; (model v1.2)
</span></span></code></pre></td></tr></table></div></div></li><li><p>allows to update model with less data</p></li></ul><h4 id=3-types-of-model-updates><a href=#3-types-of-model-updates class=header-anchor></a>3. Types of model updates</h4><ol><li>Model iteration<ul><li>A new feature is added to an existing model architecture</li><li>model architecture is changed</li><li>to be stateful training<ul><li>knowledge transfer</li><li>model surgery</li></ul></li></ul></li><li>Data iteration<ul><li>model architecture and features remain the same</li><li>but refresh this model with new data</li><li>means stateful training</li></ul></li></ol><h3 id=2-why-continual-learning><a href=#2-why-continual-learning class=header-anchor></a>2. Why Continual Learning</h3><ul><li>Continual Learning<ul><li>setting up infrastructure so that you can update your model and deploy these changes as fast as you want</li></ul></li><li>Use case<ol><li>to combat data distribution shifts, especially when the shifts happens suddenly</li><li>to adapt to rare events</li></ol></li><li>Continuous cold start problem<ul><li>arises when your model has to make predictions for a new user without any historical data</li></ul></li></ul><h3 id=3-continual-learning-challenges><a href=#3-continual-learning-challenges class=header-anchor></a>3. Continual Learning Challenges</h3><h4 id=1-fresh-data-access-challenge><a href=#1-fresh-data-access-challenge class=header-anchor></a>1. Fresh data access challenge</h4><h4 id=2-evaluation-challenged><a href=#2-evaluation-challenged class=header-anchor></a>2. Evaluation challenged</h4><ul><li>The biggest challenge of continual learning<ul><li>making sure that this update is good enough to be deployed</li></ul></li><li>The risk of catastrophic failures amplify with continual learning<ol><li>The more frequently you update your models → the more opportunities there are for updates to fail</li><li>make your models more susceptible to coordinated manipulation and adversarial attack</li></ol></li><li>evaluation pipeline<ul><li>evaluation takes time → can be another bottleneck for model update frequency</li></ul></li></ul><h4 id=3-algorithm-challenged><a href=#3-algorithm-challenged class=header-anchor></a>3. Algorithm challenged</h4><h3 id=4-four-stages-of-continual-learning><a href=#4-four-stages-of-continual-learning class=header-anchor></a>4. Four Stages of continual learning</h3><ol><li>Stage 1: Manual, stateless retraining</li><li>Stage 2: Automated retraining</li><li>Stage 3: Automated, stateful retraining</li><li>Stage 4: Continual learning</li></ol><h3 id=5-how-often-to-update-your-model><a href=#5-how-often-to-update-your-model class=header-anchor></a>5. How Often to Update Your Model</h3><h4 id=1-value-of-data-freshness><a href=#1-value-of-data-freshness class=header-anchor></a>1. Value of data freshness</h4><ul><li>Q) How often to update a model? → How much the model performance will improve with updating?</li><li>To figure out the gain<ul><li><p>training your model on the data from different time windows in the past and see how the performance changes</p></li><li><p>for example</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;--&gt; model A
</span></span><span class=line><span class=cl>  &lt;--&gt; model B
</span></span><span class=line><span class=cl>    &lt;--&gt; model C
</span></span><span class=line><span class=cl>         Test data
</span></span></code></pre></td></tr></table></div></div></li></ul></li></ul><h4 id=2-model-iteration-versus-data-iteration><a href=#2-model-iteration-versus-data-iteration class=header-anchor></a>2. Model iteration versus data iteration</h4><ul><li>model iteration<ul><li>data iterating doesn’t give you much performance gain</li><li>→ spend resources on finding a better model</li></ul></li><li>data iteration<ul><li>finding a better model architecture requires 100X compute for training and gives 1% performance gain</li><li>whereas data iteration requires 1X compute and also gives 1% performance gain</li></ul></li></ul><h2 id=test-in-production><a href=#test-in-production class=header-anchor></a>Test in Production</h2><ul><li>To sufficiently evaluate models<ul><li>use mixture of offline evaluation and online evaluation</li></ul></li><li>Offline evaluation<ul><li>Good old test split to evaluate models</li><li>→ not sufficient to evaluate new model</li><li>→backtest</li></ul></li><li>backtest<ul><li>method of testing a predictive model on data from a specific period of time in the past<ul><li>not quite sufficient</li></ul></li></ul></li></ul><h3 id=1-shadow-deployment><a href=#1-shadow-deployment class=header-anchor></a>1. Shadow Deployment</h3><ul><li>the safest way to deploy model</li><li>steps<ol><li>Deploy the candidate model in parallel with the existing model</li><li>For each incoming request, route it both models to make predictions, but only serve the existing model’s prediction to user</li><li>Log the predictions from the new model for analysis purpose</li></ol></li><li>Replace model when new model’s predictions are satisfactory</li><li>But expensive: doubling cost</li></ul><h3 id=2-ab-testing><a href=#2-ab-testing class=header-anchor></a>2. A/B Testing</h3><ul><li>a way to compare two variants of an object</li><li>testing responses to these two variants → determining which of two variants is more effective</li><li>steps<ol><li>Deploy the candidate model alongside the existing model</li><li>A percentage of traffic is routed to the new model, the rest is routed to the existing model</li><li>Monitor and analyze the predictions and user feedback, if any, from both models to determine whether the difference in the two models’ performance is statistically significant</li></ol></li><li>A/B testing requires<ol><li>A/B testing consists of a randomized experiment</li><li>A/B test should be run on a sufficient number of samples to gain enough confidence about the outcome</li></ol></li></ul><h3 id=3-canary-release><a href=#3-canary-release class=header-anchor></a>3. Canary Release</h3><ul><li>technique to reduce the risk of introducing a new software version in production<ul><li>by slow rolling out the change to a small subset of users</li><li>before rolling it out to everybody</li></ul></li><li>steps<ol><li>Deploy the candidate model alongside the existing model.<ul><li>candidate model is called canary</li></ul></li><li>A portion of the traffic is routed to the candidate model</li><li>If its performance is satisfactory increase the traffic to the candidate model. If not, abort the canary and route all traffic to the existing model</li><li>Stop when either the canary serves all the traffic or the canary is aborted</li></ol></li></ul><h3 id=4-interleaving-experiments><a href=#4-interleaving-experiments class=header-anchor></a>4. Interleaving Experiments</h3><ul><li>Reliably identifies the best algorithms with considerably smaller sample size compare to traditional A/B testomg</li><li>A/B testing**********************************:********************************** core metrics are compared</li><li>Interleaving: compared by measuring user preferences</li></ul><h3 id=5-bandits><a href=#5-bandits class=header-anchor></a>5. Bandits</h3><ul><li>A/B testing<ul><li>randomly route traffic</li><li>stateless</li></ul></li><li>Bandits<ul><li>allow to determine how to route traffic</li><li>stateful</li></ul></li><li>a lot more data-efficient that A/B testing<ul><li>require less data</li><li>reduce opportunity cost as they route traffic to the better model more quickly</li><li>A/B testing 630,000 to get a 95% confidence interval</li><li>12,000 samples to determine</li></ul></li><li>a lot more difficult to implement<ul><li>bandits requires computing and keeping track of models’ payoffs</li></ul></li></ul></section><footer class=article-footer><section class=article-tags><a href=/blog/tags/ml-system/>Ml-System</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/blog/p/chapter-8.-data-distribution-shifts-and-monitoring/><div class=article-details><h2 class=article-title>Chapter 8. Data Distribution Shifts and Monitoring</h2></div></a></article><article><a href=/blog/p/chapter-7.-model-deployment-and-prediction-service/><div class=article-details><h2 class=article-title>Chapter 7. Model Deployment and Prediction Service</h2></div></a></article><article><a href=/blog/p/chapter-3.-data-engineer-fundamentals/><div class=article-details><h2 class=article-title>Chapter 3. Data Engineer Fundamentals</h2></div></a></article><article><a href=/blog/p/apache-kafka-101/><div class=article-details><h2 class=article-title>Apache Kafka 101</h2></div></a></article><article><a href=/blog/p/kafka-setup/><div class=article-details><h2 class=article-title>Kafka Setup</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=aiden-jeon/aiden-jeon.github.io issue-term=pathname label=comment crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 Aiden's Camp</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.27.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>